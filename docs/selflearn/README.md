# Self-Learning System

> Система непрерывного самообучения MaaS через эксперименты с импакт-факторами.

---

## Философия

> Основная цель системы — постоянное самообучение.
> Реальные диалоги с пользователем — лишь разновидность учебных кейсов.

Всё основано на прозрачных метриках: любое решение можно объяснить, повторить и откатить.

---

## Роли в системе

| Роль | Документ | Кто это | LLM? |
|------|----------|---------|------|
| **Мета-пользователь** | — | Владелец системы, задаёт цели | Человек |
| **Менеджер** | [MANAGER.md](./MANAGER.md) | Координатор, переводит цели в задачи | LLM + код |
| **Ученик** | — | MaaS-ассистент, предмет экспериментов | LLM |
| **User Emulator** | [USER EMULATOR.md](./USER%20EMULATOR.md) | Симулятор реальных пользователей | LLM |
| **Учитель** | [TEACHER.md](./TEACHER.md) | Оценка качества, формирование гипотез | LLM + SQL |
| **Настройщик** | [TUNER.md](./TUNER.md) | Применение параметров, rollback | Чистый код |

**Подробная схема взаимодействия:** [Системы и ролей.md](./Системы%20и%20ролей.md)

---

## Цикл обучения

```
┌─────────────────────────────────────────────────────────────────────┐
│                         LEARNING CYCLE                               │
│                                                                      │
│  ┌──────────────┐    цели     ┌──────────────┐                      │
│  │ Мета-        │ ──────────► │   Менеджер   │                      │
│  │ пользователь │ ◄────────── │ (координатор)│                      │
│  └──────────────┘   отчёты    └──────┬───────┘                      │
│                                      │                               │
│                    ┌─────────────────┼─────────────────┐            │
│                    ▼                 ▼                 ▼            │
│            ┌─────────────┐   ┌─────────────┐   ┌─────────────┐      │
│            │   Учитель   │   │   Симулятор │   │ Настройщик  │      │
│            │  (анализ)   │   │ (генерация) │   │ (параметры) │      │
│            └──────┬──────┘   └──────┬──────┘   └──────┬──────┘      │
│                   │                 │                 │             │
│                   │      ┌──────────┴──────────┐      │             │
│                   │      ▼                     │      │             │
│                   │  ┌─────────────┐           │      │             │
│                   └─►│    MaaS     │◄──────────┘      │             │
│                      │  (Ученик)   │◄─────────────────┘             │
│                      └─────────────┘                                │
│                            │                                        │
│                            ▼                                        │
│                   ┌─────────────────┐                               │
│                   │   TELEMETRY DB  │                               │
│                   └─────────────────┘                               │
└─────────────────────────────────────────────────────────────────────┘
```

### Шаги цикла

| Шаг | Кто → Кто | Что происходит |
|-----|-----------|----------------|
| 0 | Мета-пользователь → Менеджер | Постановка целей и ограничений |
| 1 | Менеджер → Учитель | Запрос на дизайн эксперимента |
| 2 | Учитель → Настройщик | Подготовка вариантов параметров |
| 3 | Симулятор ↔ MaaS | Генерация диалогов (baseline + variant) |
| 4 | Учитель | Оценка метрик, verdict |
| 5 | Учитель → Настройщик | Применение или откат |
| 6 | Менеджер → Мета-пользователь | Отчёт о результатах |

---

## Артефакты

| Артефакт | Тип | Документация |
|----------|-----|--------------|
| `experiment_parameters` | Таблица БД | [AUTONOMY.md](./AUTONOMY.md) |
| `telemetry_events` | Таблица БД | [CYCLES.md](./CYCLES.md) |
| `test_dialogs` | Таблица БД | [GOLDEN_DATASET.md](./GOLDEN_DATASET.md) |
| `sim_scenarios.json` | Конфиг | [USER EMULATOR.md](./USER%20EMULATOR.md) |
| `sim_personas.json` | Конфиг | [USER EMULATOR.md](./USER%20EMULATOR.md) |

---

## Тематические документы

### Роли (кто что делает)

| Файл | Отвечает на вопрос |
|------|-------------------|
| [Системы и ролей.md](./Системы%20и%20ролей.md) | Обзор всех ролей и их взаимодействия |
| [MANAGER.md](./MANAGER.md) | Как работает координатор |
| [TEACHER.md](./TEACHER.md) | Как оценивать качество и формировать гипотезы |
| [TUNER.md](./TUNER.md) | Как безопасно менять параметры |
| [USER EMULATOR.md](./USER%20EMULATOR.md) | Как генерировать реалистичные диалоги |

### Механизмы (как это работает)

| Файл | Отвечает на вопрос |
|------|-------------------|
| [CYCLES.md](./CYCLES.md) | **Когда** запускать обучение (micro/macro/deep) |
| [EXPERIMENTS.md](./EXPERIMENTS.md) | **Как** проводить A/B тесты |
| [AUTONOMY.md](./AUTONOMY.md) | **Что** можно менять автоматически vs вручную |
| [GOLDEN_DATASET.md](./GOLDEN_DATASET.md) | **Чем** тестировать (golden dataset, LLM-judge) |

---

## Связь с другими документами

| Документ | Отвечает на вопрос |
|----------|-------------------|
| [IMPACTS.md](../../IMPACTS.md) | **Что** можем менять (артефакты, параметры) |
| [METRICS.md](../../METRICS.md) | **Как** измеряем качество (формулы, targets) |
| **docs/selflearn/** | **Когда, кто и как** меняет параметры |

---

## Реализация (фазы)

| Фаза | Описание | Статус |
|------|----------|--------|
| Phase 1 | Telemetry Foundation | [ ] |
| Phase 2 | Golden Dataset (50+ примеров) | [ ] |
| Phase 3 | LLM-Judge | [ ] |
| Phase 4 | User Emulator | [ ] |
| Phase 5 | Teacher (Evaluator) | [ ] |
| Phase 6 | Tuner | [ ] |
| Phase 7 | Manager (Coordinator) | [ ] |

---

*Последнее обновление: 2025-11-26*
