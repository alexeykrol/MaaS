Алгоритм работы памяти


1\. Анализ запроса. В чем смысл анализа? Поскольку мы должны правильно сформировать контекст, то в него нужно добавить только то, что необходимо и не добавлять лишнего. По сути любой вопрос может очертить некий скоп

\- Текущий, т.е. непосредственно следующий в текущем треде за предыдущем вопросом. Т.е. это последние инференсы текущего активного треда.

\- Короткий, который выходит за пределы текущего треда, но относится к тредам к примеру за последние сутки.

\- Средний - относится к тредам за последние 3 дня

\- Недельный + неделя.

\- Месячный - последний месяц.

\- Помесечный - т.е. То, что обсуждалось в предыдущие месяцы.

1\. Шаг. Нужно определить - можно ли получить контекст в претренированной базе самой модели или это связано с историей. Это происходит одновременно для избегания конфликтов. Для этого сначала запрос передается дешевой модели, которая должна просто сказать, что это есть в базе или нет.

Идея в том, что сначала определить, к какому периоду относится вопрос/ запрос и нужно ли вытягивать это? Чтобы это определить, каждый из указанных периодов представляет набор ключевых тезисов, ключевых слов - которые помогают определить, что запрос относится к данному диапазону. Таким образом, если диапазон найден, то происходит следующая итерация поиска в каком из более мелких периодов находится нужный контекст. Таким образом, мы находим целевое вхождение, в котором есть тезисы данного контекста, а также ссылка на все треды, связанные с этой темой. Это нужно для того, чтобы можно было поднять все треды, если компактизированного контекста недостаточно. Это примерно, как если я упоминаю в диалоге что-то, что выходит за пределы контекста текущего треда, то запускается алгоритм поиска. При этом помск происходит последовательно от недавнего к более давнему. Кром